<!DOCTYPE html>
<html>
<head>
    <title>Movie Reviews</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <h1>üé¨ Movie Reviews</h1>

    <!-- üîç SEARCH + SORT FORM -->
    <form method="GET" action="/" style="margin-bottom:20px;">
        <input type="text"
               name="search"
               placeholder="Search movie..."
               value="{{ search_query or '' }}">

        <select name="sort">
            <option value="">Sort by rating</option>
            <option value="high" {% if sort_option == "high" %}selected{% endif %}>
                ‚≠ê High ‚Üí Low
            </option>
            <option value="low" {% if sort_option == "low" %}selected{% endif %}>
                ‚≠ê Low ‚Üí High
            </option>
        </select>

        <button type="submit">Apply</button>
        <a href="/">Clear</a>
    </form>

    <a href="/add" class="add-button">Add Movie Review</a>

    {% if movies %}
        {% for movie in movies %}
        <div class="movie-card">
            <h3>{{ movie.name }}</h3>

            <p>
                {% for i in range(movie.rating|int) %}
                    ‚≠ê
                {% endfor %}
            </p>

            <p>{{ movie.review }}</p>

            <a href="/edit/{{ loop.index0 }}" class="edit-button">Edit</a>

            <form action="/delete/{{ loop.index0 }}"
                  method="POST"
                  style="display:inline;"
                  onsubmit="return confirm('Are you sure you want to delete this review?');">
                <button type="submit" class="delete-button">Delete</button>
            </form>
        </div>
        {% endfor %}
    {% else %}
        <p style="font-size:18px; color: gray; margin-top:20px;">
            üé• No movie reviews found.
        </p>
    {% endif %}

</body>
</html>